---
- name: Restart pulp-api
  ansible.builtin.command:
    cmd: "systemctl --machine={{ foremanctl_user }}@ --user restart pulp-api"
  changed_when: true
  # Alternative approach using systemd module (requires become_user):
  # become: true
  # become_user: "{{ foremanctl_user }}"
  # ansible.builtin.systemd:
  #   name: pulp-api
  #   state: restarted
  #   scope: user

- name: Restart pulp-content
  ansible.builtin.command:
    cmd: "systemctl --machine={{ foremanctl_user }}@ --user restart pulp-content"
  changed_when: true
  # Alternative approach using systemd module (requires become_user):
  # become: true
  # become_user: "{{ foremanctl_user }}"
  # ansible.builtin.systemd:
  #   name: pulp-content
  #   state: restarted
  #   scope: user

- name: Restart pulp-worker
  ansible.builtin.command:
    cmd: "systemctl --machine={{ foremanctl_user }}@ --user restart pulp-worker.target"
  changed_when: true
  # Alternative approach using systemd module (requires become_user):
  # become: true
  # become_user: "{{ foremanctl_user }}"
  # ansible.builtin.systemd:
  #   name: pulp-worker.target
  #   state: restarted
  #   scope: user
