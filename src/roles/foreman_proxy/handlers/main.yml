---
- name: Restart Foreman Proxy
  ansible.builtin.command:
    cmd: "systemctl --machine={{ foremanctl_user }}@ --user restart foreman-proxy"
  changed_when: true
  # Alternative approach using systemd module (requires become_user):
  # become: true
  # become_user: "{{ foremanctl_user }}"
  # ansible.builtin.systemd:
  #   name: foreman-proxy
  #   state: restarted
  #   scope: user
